<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Detail - <%= title %></title>

    <link rel="stylesheet" href="/css/bootstrap.css" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.7.1/css/all.css"
      integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css"
    />
    <link
      href="https://unpkg.com/gijgo@1.9.11/css/gijgo.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/css/mystyle.css" />
  </head>

  <body style="background-color:#FAFAFA;">
    <% include Header %>

    <div class="container-fluid" style="margin: 70px 30px;">
      <h1 id="productTitle"><%= title %></h1>
      <img id="productImage" src="<%= imgsrc %>"/>
      <p id="productLocation">Location: <%= location %></p>
      <p id="productDescription">Description: <%= description %></p>
      <p id="productCreator">Created By: <%= creator %></p>
      <% if (status === "in progress") { %>
        <button id="timer" disabled></button>
      <%} else if (status === "available" && expiration > new Date()) {%>
        <form action=<%= _id %> method="post">
          <input type="submit" name="reserve" value="Reserve"/>
        </form><%
      } else {%>
        <p id="status">EXPIRED</p><%
      }
      %>
    </div>
  </body>
  <script>
    var countDownDate = <%=expiration.getTime()%>
    // Update the count down every 1 second
    var x = setInterval(function() {

    // Get today's date and time
    var now = new Date().getTime();

    // Find the distance between now and the count down date
    var distance = countDownDate - now;

    // Time calculations for days, hours, minutes and seconds
    var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    var seconds = Math.floor((distance % (1000 * 60)) / 1000);

    // Display the result in the element with id="demo"
    document.getElementById("timer").innerHTML = hours + "h "
    + minutes + "m " + seconds + "s ";

    // If the count down is finished, write some text
    if (distance < 0) {
        clearInterval(x);
        document.getElementById("timer").innerHTML = "EXPIRED";
    }
    }, 1000);
  </script>
</html>
